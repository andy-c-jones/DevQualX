@page "/dev/components"
@using DevQualX.Web.Components.Library.Atoms
@using DevQualX.Web.Components.Library.Molecules
@using Microsoft.JSInterop
@inject IJSRuntime JS

<PageTitle>Component Showcase - DevQualX</PageTitle>

<div class="container mx-auto py-8">
    <h1 class="text-4xl font-bold mb-2">Component Library Showcase</h1>
    <p class="text-gray-600 mb-8">All custom components built for DevQualX</p>
    
    <div class="flex flex-col gap-12">
        @* Buttons Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Buttons</h2>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Variants</h3>
                <div class="flex flex-wrap gap-3">
                    <Button Variant="ButtonVariant.Default">Default</Button>
                    <Button Variant="ButtonVariant.Primary">Primary</Button>
                    <Button Variant="ButtonVariant.Secondary">Secondary</Button>
                    <Button Variant="ButtonVariant.Danger">Danger</Button>
                    <Button Variant="ButtonVariant.Ghost">Ghost</Button>
                    <Button Variant="ButtonVariant.Link">Link</Button>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Sizes</h3>
                <div class="flex flex-wrap items-center gap-3">
                    <Button Size="ButtonSize.Sm">Small</Button>
                    <Button Size="ButtonSize.Md">Medium</Button>
                    <Button Size="ButtonSize.Lg">Large</Button>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">States</h3>
                <div class="flex flex-wrap gap-3">
                    <Button Variant="ButtonVariant.Primary">Normal</Button>
                    <Button Variant="ButtonVariant.Primary" Disabled="true">Disabled</Button>
                    <Button Variant="ButtonVariant.Primary" Loading="true">Loading</Button>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">With Icons</h3>
                <div class="flex flex-wrap gap-3">
                    <Button Variant="ButtonVariant.Primary" LeadingIcon="HeroIcon.Plus">Create</Button>
                    <Button Variant="ButtonVariant.Secondary" LeadingIcon="HeroIcon.Pencil">Edit</Button>
                    <Button Variant="ButtonVariant.Danger" LeadingIcon="HeroIcon.Trash">Delete</Button>
                    <Button Variant="ButtonVariant.Default" LeadingIcon="HeroIcon.MagnifyingGlass">Search</Button>
                    <Button Variant="ButtonVariant.Primary" TrailingIcon="HeroIcon.ArrowRight">Next</Button>
                    <Button Variant="ButtonVariant.Default" TrailingIcon="HeroIcon.ArrowDownTray">Download</Button>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Icon Only</h3>
                <div class="flex flex-wrap gap-3">
                    <Button Variant="ButtonVariant.Primary" LeadingIcon="HeroIcon.Plus" AriaLabel="Add item" />
                    <Button Variant="ButtonVariant.Secondary" LeadingIcon="HeroIcon.Pencil" AriaLabel="Edit item" />
                    <Button Variant="ButtonVariant.Danger" LeadingIcon="HeroIcon.Trash" AriaLabel="Delete item" />
                    <Button Variant="ButtonVariant.Ghost" LeadingIcon="HeroIcon.Cog6Tooth" AriaLabel="Settings" />
                    <Button Variant="ButtonVariant.Ghost" LeadingIcon="HeroIcon.Heart" AriaLabel="Like" />
                    <Button Variant="ButtonVariant.Ghost" LeadingIcon="HeroIcon.Share" AriaLabel="Share" />
                </div>
            </div>
        </section>
        
        @* Badges Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Badges</h2>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Variants</h3>
                <div class="flex flex-wrap gap-3">
                    <Badge Variant="BadgeVariant.Default">Default</Badge>
                    <Badge Variant="BadgeVariant.Primary">Primary</Badge>
                    <Badge Variant="BadgeVariant.Success">Success</Badge>
                    <Badge Variant="BadgeVariant.Danger">Danger</Badge>
                    <Badge Variant="BadgeVariant.Warning">Warning</Badge>
                    <Badge Variant="BadgeVariant.Info">Info</Badge>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">With Dot Indicator</h3>
                <div class="flex flex-wrap gap-3">
                    <Badge Variant="BadgeVariant.Primary" ShowDot="true">Active</Badge>
                    <Badge Variant="BadgeVariant.Success" ShowDot="true">Online</Badge>
                    <Badge Variant="BadgeVariant.Danger" ShowDot="true">Error</Badge>
                </div>
            </div>
        </section>
        
        @* Cards Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Cards</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <Card Variant="CardVariant.Default">
                    <CardHeader>Default Card</CardHeader>
                    <CardBody>
                        <p>This is a default card with header and body.</p>
                    </CardBody>
                </Card>
                
                <Card Variant="CardVariant.Bordered">
                    <CardHeader>Bordered Card</CardHeader>
                    <CardBody>
                        <p>This card has a visible border.</p>
                    </CardBody>
                    <CardFooter>
                        <Button Size="ButtonSize.Sm">Action</Button>
                    </CardFooter>
                </Card>
                
                <Card Variant="CardVariant.Elevated">
                    <CardHeader>Elevated Card</CardHeader>
                    <CardBody>
                        <p>This card has a shadow elevation.</p>
                    </CardBody>
                </Card>
            </div>
        </section>
        
        @* Text Input Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Text Inputs</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl">
                <TextInput 
                    Label="Email" 
                    Type="InputType.Email" 
                    Placeholder="you@example.com"
                    HelperText="We'll never share your email." />
                
                <TextInput 
                    Label="Password" 
                    Type="InputType.Password" 
                    Placeholder="Enter password"
                    Required="true" />
                
                <TextInput 
                    Label="Username" 
                    Type="InputType.Text" 
                    Placeholder="johndoe"
                    Required="true"
                    MinLength="3"
                    MaxLength="20"
                    Pattern="^[a-zA-Z0-9_]+$"
                    HelperText="3-20 characters, letters, numbers, and underscores only." />
                
                <TextInput 
                    Label="Website" 
                    Type="InputType.Url" 
                    Placeholder="https://example.com" />
                
                <TextInput 
                    Label="Disabled Input" 
                    Type="InputType.Text" 
                    Value="Cannot edit"
                    Disabled="true" />
                
                <TextInput 
                    Label="Readonly Input" 
                    Type="InputType.Text" 
                    Value="Read only value"
                    Readonly="true" />
            </div>
        </section>
        
        @* Switch Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Switches</h2>
            
            <div class="flex flex-col gap-4 max-w-md">
                <Switch Label="Enable notifications" />
                <Switch Label="Dark mode" Checked="true" />
                <Switch Label="Disabled switch" Disabled="true" />
            </div>
        </section>
        
        @* Tabs Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Tabs</h2>
            
            <Tabs AriaLabel="Example tabs">
                <TabHeaders>
                    <TabButton PanelId="tab1" IsActive="true">Profile</TabButton>
                    <TabButton PanelId="tab2">Settings</TabButton>
                    <TabButton PanelId="tab3">Messages</TabButton>
                </TabHeaders>
                <ChildContent>
                    <TabPanel PanelId="tab1" IsActive="true">
                        <Card>
                            <CardBody>
                                <h3 class="font-semibold mb-2">Profile Content</h3>
                                <p>This is the profile tab content. It contains information about the user's profile.</p>
                            </CardBody>
                        </Card>
                    </TabPanel>
                    <TabPanel PanelId="tab2">
                        <Card>
                            <CardBody>
                                <h3 class="font-semibold mb-2">Settings Content</h3>
                                <p>This is the settings tab content. Configure your preferences here.</p>
                            </CardBody>
                        </Card>
                    </TabPanel>
                    <TabPanel PanelId="tab3">
                        <Card>
                            <CardBody>
                                <h3 class="font-semibold mb-2">Messages Content</h3>
                                <p>This is the messages tab content. View and manage your messages.</p>
                            </CardBody>
                        </Card>
                    </TabPanel>
                </ChildContent>
            </Tabs>
        </section>
        
        @* Pagination Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Pagination</h2>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Standard Pagination</h3>
                <Pagination CurrentPage="1" TotalItems="100" PageSize="10" BaseUrl="/dev/components" />
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Middle Page</h3>
                <Pagination CurrentPage="5" TotalItems="200" PageSize="10" BaseUrl="/dev/components" />
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Last Page</h3>
                <Pagination CurrentPage="10" TotalItems="100" PageSize="10" BaseUrl="/dev/components" />
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Without Page Info</h3>
                <Pagination CurrentPage="3" TotalItems="100" PageSize="10" BaseUrl="/dev/components" ShowPageInfo="false" />
            </div>
        </section>
        
        @* Tables Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Tables</h2>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Basic Table</h3>
                <Table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>John Doe</td>
                            <td>john@example.com</td>
                            <td>Admin</td>
                            <td><Badge Variant="BadgeVariant.Success">Active</Badge></td>
                        </tr>
                        <tr>
                            <td>Jane Smith</td>
                            <td>jane@example.com</td>
                            <td>Editor</td>
                            <td><Badge Variant="BadgeVariant.Success">Active</Badge></td>
                        </tr>
                        <tr>
                            <td>Bob Johnson</td>
                            <td>bob@example.com</td>
                            <td>Viewer</td>
                            <td><Badge Variant="BadgeVariant.Warning">Pending</Badge></td>
                        </tr>
                    </tbody>
                </Table>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Striped & Compact</h3>
                <Table Density="TableDensity.Compact" Striped="true">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>SKU</th>
                            <th>Price</th>
                            <th>Stock</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Widget A</td>
                            <td>WDG-001</td>
                            <td>$19.99</td>
                            <td>150</td>
                        </tr>
                        <tr>
                            <td>Widget B</td>
                            <td>WDG-002</td>
                            <td>$29.99</td>
                            <td>85</td>
                        </tr>
                        <tr>
                            <td>Widget C</td>
                            <td>WDG-003</td>
                            <td>$39.99</td>
                            <td>42</td>
                        </tr>
                        <tr>
                            <td>Widget D</td>
                            <td>WDG-004</td>
                            <td>$49.99</td>
                            <td>0</td>
                        </tr>
                    </tbody>
                </Table>
            </div>
        </section>
        
        @* Paginated Tables Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Paginated Tables</h2>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">With Data</h3>
                <PaginatedTable 
                    CurrentPage="1"
                    TotalItems="50"
                    PageSize="5"
                    BaseUrl="/dev/components">
                    <TableContent>
                        <thead>
                            <tr>
                                <th>Order #</th>
                                <th>Customer</th>
                                <th>Date</th>
                                <th>Total</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#1001</td>
                                <td>Alice Williams</td>
                                <td>2026-01-15</td>
                                <td>$125.00</td>
                                <td><Badge Variant="BadgeVariant.Success">Delivered</Badge></td>
                            </tr>
                            <tr>
                                <td>#1002</td>
                                <td>Charlie Brown</td>
                                <td>2026-01-14</td>
                                <td>$89.50</td>
                                <td><Badge Variant="BadgeVariant.Primary">Shipped</Badge></td>
                            </tr>
                            <tr>
                                <td>#1003</td>
                                <td>Diana Prince</td>
                                <td>2026-01-14</td>
                                <td>$210.75</td>
                                <td><Badge Variant="BadgeVariant.Warning">Processing</Badge></td>
                            </tr>
                            <tr>
                                <td>#1004</td>
                                <td>Ethan Hunt</td>
                                <td>2026-01-13</td>
                                <td>$45.00</td>
                                <td><Badge Variant="BadgeVariant.Danger">Cancelled</Badge></td>
                            </tr>
                            <tr>
                                <td>#1005</td>
                                <td>Fiona Gallagher</td>
                                <td>2026-01-13</td>
                                <td>$320.00</td>
                                <td><Badge Variant="BadgeVariant.Success">Delivered</Badge></td>
                            </tr>
                        </tbody>
                    </TableContent>
                </PaginatedTable>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Loading State</h3>
                <PaginatedTable 
                    CurrentPage="1"
                    TotalItems="0"
                    PageSize="10"
                    BaseUrl="/dev/components"
                    IsLoading="true"
                    LoadingMessage="Fetching data...">
                    <TableContent>
                        <thead>
                            <tr><th>Data</th></tr>
                        </thead>
                        <tbody></tbody>
                    </TableContent>
                </PaginatedTable>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Empty State</h3>
                <PaginatedTable 
                    CurrentPage="1"
                    TotalItems="0"
                    PageSize="10"
                    BaseUrl="/dev/components"
                    EmptyMessage="No orders found">
                    <TableContent>
                        <thead>
                            <tr>
                                <th>Order #</th>
                                <th>Customer</th>
                                <th>Date</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </TableContent>
                </PaginatedTable>
            </div>
        </section>
        
        @* Theme Switcher Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Theme Switcher</h2>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Icon Only</h3>
                <ThemeSwitcher />
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">With Label</h3>
                <ThemeSwitcher ShowLabel="true" />
            </div>
            
            <p class="text-sm text-gray-600">Click the theme switcher to cycle through Light → Dark → System themes.</p>
        </section>
        
        @* Notifications & Toasts Section *@
        <section>
            <h2 class="text-2xl font-semibold mb-4">Notifications & Toasts</h2>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Toast Notifications</h3>
                <p class="text-sm text-gray-600 mb-4">Toasts appear in the top-right corner and auto-dismiss after 10 seconds. Click the buttons below to trigger different toast types.</p>
                <div class="flex flex-wrap gap-3">
                    <Button Variant="ButtonVariant.Primary" LeadingIcon="HeroIcon.CheckCircle" OnClick="ShowSuccessToast">Success Toast</Button>
                    <Button Variant="ButtonVariant.Danger" LeadingIcon="HeroIcon.XCircle" OnClick="ShowDangerToast">Error Toast</Button>
                    <Button Variant="ButtonVariant.Secondary" LeadingIcon="HeroIcon.ExclamationTriangle" OnClick="ShowWarningToast">Warning Toast</Button>
                    <Button Variant="ButtonVariant.Primary" LeadingIcon="HeroIcon.InformationCircle" OnClick="ShowInfoToast">Info Toast</Button>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Progress Toasts</h3>
                <p class="text-sm text-gray-600 mb-4">Progress toasts show elapsed time and transform to success/error toasts when completed.</p>
                <div class="flex flex-wrap gap-3">
                    <Button Variant="ButtonVariant.Primary" LeadingIcon="HeroIcon.ArrowPath" OnClick="ShowProgressToast">Show Progress (3s)</Button>
                    <Button Variant="ButtonVariant.Primary" LeadingIcon="HeroIcon.ArrowDownTray" OnClick="ShowProgressWithDownload">Progress with Download</Button>
                    <Button Variant="ButtonVariant.Danger" LeadingIcon="HeroIcon.XCircle" OnClick="ShowFailingProgress">Failing Progress</Button>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Multiple Toasts (Stacking)</h3>
                <p class="text-sm text-gray-600 mb-4">Maximum 5 active toasts on screen. Additional toasts are queued.</p>
                <div class="flex flex-wrap gap-3">
                    <Button Variant="ButtonVariant.Secondary" OnClick="ShowMultipleToasts">Show 3 Toasts</Button>
                    <Button Variant="ButtonVariant.Secondary" OnClick="ShowManyToasts">Show 10 Toasts (Queue Test)</Button>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Notification Bell & Tray</h3>
                <p class="text-sm text-gray-600 mb-4">The notification bell is visible in the top-right corner of the header. Click it to see all notifications in the tray.</p>
                <NotificationBell />
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Persistent Notifications</h3>
                <p class="text-sm text-gray-600 mb-4">Notifications persist in localStorage for 7 days (max 100 items). Try refreshing the page!</p>
                <div class="flex flex-wrap gap-3">
                    <Button Variant="ButtonVariant.Secondary" LeadingIcon="HeroIcon.Trash" OnClick="ClearAllNotifications">Clear All Notifications</Button>
                </div>
            </div>
        </section>
    </div>
</div>

@code {
    private async Task ShowSuccessToast()
    {
        await JS.InvokeVoidAsync("eval", @"
            window.DevQualX?.notifications?.show({
                title: 'Success!',
                message: 'Your operation completed successfully.',
                level: 'success',
                timeout: 10000
            })
        ");
    }
    
    private async Task ShowDangerToast()
    {
        await JS.InvokeVoidAsync("eval", @"
            window.DevQualX?.notifications?.show({
                title: 'Error',
                message: 'Something went wrong. Please try again.',
                level: 'danger',
                timeout: 10000
            })
        ");
    }
    
    private async Task ShowWarningToast()
    {
        await JS.InvokeVoidAsync("eval", @"
            window.DevQualX?.notifications?.show({
                title: 'Warning',
                message: 'Please check your input before proceeding.',
                level: 'warning',
                timeout: 10000
            })
        ");
    }
    
    private async Task ShowInfoToast()
    {
        await JS.InvokeVoidAsync("eval", @"
            window.DevQualX?.notifications?.show({
                title: 'Information',
                message: 'Did you know? You can customize these notifications!',
                level: 'info',
                timeout: 10000
            })
        ");
    }
    
    private async Task ShowProgressToast()
    {
        var id = await JS.InvokeAsync<string>("eval", @"
            window.DevQualX?.notifications?.showProgress({
                title: 'Processing...',
                message: 'Please wait while we process your request.'
            })
        ");
        
        // Simulate async work
        await Task.Delay(3000);
        
        await JS.InvokeVoidAsync("eval", $@"
            window.DevQualX?.notifications?.completeProgress(
                '{id}',
                true,
                'Processing completed successfully!',
                null
            )
        ");
    }
    
    private async Task ShowProgressWithDownload()
    {
        var id = await JS.InvokeAsync<string>("eval", @"
            window.DevQualX?.notifications?.showProgress({
                title: 'Generating report...',
                message: 'Preparing your download.'
            })
        ");
        
        // Simulate async work
        await Task.Delay(4000);
        
        await JS.InvokeVoidAsync("eval", $@"
            window.DevQualX?.notifications?.completeProgress(
                '{id}',
                true,
                'Report generated successfully!',
                '/downloads/report.pdf'
            )
        ");
    }
    
    private async Task ShowFailingProgress()
    {
        var id = await JS.InvokeAsync<string>("eval", @"
            window.DevQualX?.notifications?.showProgress({
                title: 'Uploading file...',
                message: 'This will fail in 2 seconds.'
            })
        ");
        
        // Simulate async work that fails
        await Task.Delay(2000);
        
        await JS.InvokeVoidAsync("eval", $@"
            window.DevQualX?.notifications?.completeProgress(
                '{id}',
                false,
                'Upload failed: File too large',
                null
            )
        ");
    }
    
    private async Task ShowMultipleToasts()
    {
        await JS.InvokeVoidAsync("eval", @"
            window.DevQualX?.notifications?.show({
                title: 'First notification',
                message: 'This is the first toast.',
                level: 'primary',
                timeout: 10000
            });
            
            setTimeout(() => {
                window.DevQualX?.notifications?.show({
                    title: 'Second notification',
                    message: 'This is the second toast.',
                    level: 'success',
                    timeout: 10000
                });
            }, 500);
            
            setTimeout(() => {
                window.DevQualX?.notifications?.show({
                    title: 'Third notification',
                    message: 'This is the third toast.',
                    level: 'info',
                    timeout: 10000
                });
            }, 1000);
        ");
    }
    
    private async Task ShowManyToasts()
    {
        for (int i = 1; i <= 10; i++)
        {
            var index = i;
            await JS.InvokeVoidAsync("eval", $@"
                window.DevQualX?.notifications?.show({{
                    title: 'Toast #{index}',
                    message: 'Testing toast queue with multiple notifications.',
                    level: 'secondary',
                    timeout: 8000
                }})
            ");
            await Task.Delay(200); // Small delay between each
        }
    }
    
    private async Task ClearAllNotifications()
    {
        await JS.InvokeVoidAsync("eval", "window.DevQualX?.notifications?.clearAll()");
    }
    
    // This page should only be accessible in Development environment
}
